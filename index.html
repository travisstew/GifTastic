<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Giphy Api</title>
</head>
<body>
    <div id="topics">

    </div>
    <div id="images">

    </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script>
      
      var topics = ["corvette","lamborghini","ferrari", "porsche"];
      

      //loop through topics to create buttons with id's and classes 
      topics.forEach(function(t,index){

         var button = $('<button>');
         button.html(t);
         button.attr('id', "topic"+index);
         button.attr('class', 'topic-btn');
         button.attr('data-topic', t); 
         button.appendTo("#topics");
        
      });

      var searchTerm = 'cat';
    
      
      $('.topic-btn').on('click', function(){
         var topic = $(this).data("topic");
        
         var url = `https://api.giphy.com/v1/gifs/search?q=${topic}&api_key=Jb3ttdnYHru0VwVp3pTkk1thutShY83T&limit=10`;

         $.ajax({
          method: 'GET',
          url: url,
          
          }).then(function(results){
            console.log(results);
            
            console.log(results.data[0].images.preview_gif);
          
          // img.attr('src', results.data[0].images.downsized_medium.url); 
          // img.appendTo('#images')

          results.data.forEach(function(r,index){
            var img  = $('<img>');
                img.attr('data-pic', index );
            // r.data[0].images["480w_still"].url;
            // r.images.downsized_medium.url;


            //still image
            r.images.fixed_height_still.url;
            //moving gif 
            r.images.fixed_height.url;

            img.attr('src', r.images.fixed_height_still.url ); 
            img.appendTo('#images');


            $('img').on('click', function(){
              var picNum = $(this).data('pic');
              var picAction = $(this).attr('src');

              // var moving =  $(this).attr('src', results.data[picNum].images.fixed_height.url);
              // var nonMoving = $(this).attr('src', results.data[picNum].images.fixed_height_still.url);
              if(picAction === results.data[picNum].images.fixed_height.url){
                $(this).attr('src', results.data[picNum].images.fixed_height_still.url); 
              }else{
                $(this).attr('src', results.data[picNum].images.fixed_height.url);
              }
              
              
            });
        

          });

   
      });

      });

    
  </script>
</body>
</html>